import{d as q,I as k,r as u,o as R,f as t,c as a,e as r,b as c,g as x,t as i,F as C,i as F,A,v as m,x as _,M as D,k as V,C as w,_ as H}from"./index-DD0chK9m.js";const I={class:"history-card"},M={class:"history-content"},j={key:0,class:"d-flex justify-center align-center",style:{height:"200px"}},z={key:1,class:"error-message"},B={key:2,class:"request-list"},E={class:"request-header"},N={class:"request-type"},P={class:"request-details"},S={class:"detail-item"},T={key:0,class:"detail-item"},b={key:3,class:"error-message"},L=q({__name:"RequestHistory",setup(U){const h=k(),l=u([]),d=u(!0),n=u(null),y=e=>e.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" "),v=e=>e.charAt(0).toUpperCase()+e.slice(1),p=e=>w(new Date(e),"dd MMM yyyy, HH:mm"),f=e=>e==="promote user to director"?"mdi-shield-account":"mdi-account-plus",g=async()=>{try{d.value=!0,n.value=null;const e=await fetch(`${A}/requests/me?offset=0&limit=10`,{method:"GET",headers:{Authorization:`Bearer ${h.token}`}});if(!e.ok){const s=await e.json();throw new Error(s.message||"Failed to fetch requests")}const o=await e.json();l.value=[...o]}catch(e){console.error("Error fetching requests:",e),n.value=e.message||"Failed to load request history. Please try again later."}finally{d.value=!1}};return R(()=>{g()}),(e,o)=>(t(),a("div",I,[r("div",M,[o[0]||(o[0]=r("h3",{class:"section-title"},"Request History",-1)),d.value?(t(),a("div",j,[c(x,{indeterminate:"",color:"#42DDF2FF"})])):n.value?(t(),a("div",z,i(n.value),1)):l.value.length>0?(t(),a("div",B,[(t(!0),a(C,null,F(l.value,s=>(t(),a("div",{key:s.request_date,class:"request-item"},[r("div",E,[r("div",N,[c(m,{icon:f(s.request_type),class:"request-icon"},null,8,["icon"]),_(" "+i(y(s.request_type)),1)]),r("div",{class:D(["status-tag",`status-${s.status}`])},i(v(s.status)),3)]),r("div",P,[r("div",S,[c(m,{icon:"mdi-calendar",size:"small",class:"detail-icon"}),_(" "+i(p(s.request_date)),1)]),s.username?(t(),a("div",T,[c(m,{icon:"mdi-account",size:"small",class:"detail-icon"}),_(" Player: "+i(s.username),1)])):V("",!0)])]))),128))])):(t(),a("div",b," You have not submitted any requests. "))])]))}}),G=H(L,[["__scopeId","data-v-99cb2748"]]);export{G as R};
