import{d as D,f as a,c as m,e as o,b as v,w as _,h as c,u as T,v as C,q as F,t as k,F as P,i as I,E as S,x as j,G as z,_ as M,r as l,o as H,a as N,V as U,A as E,g as R,j as q,k as $,l as G}from"./index-DD0chK9m.js";import{P as W}from"./PlayerModalDialog-e3S7FNpc.js";import{H as J}from"./HeaderSection-BqWuRDgu.js";import{L as K}from"./LoadMoreButton-Cql9AWZ4.js";import"./VDialog-8pvQ3nO6.js";import"./dialog-transition-ChtNxUt0.js";const O={class:"team-card"},Q={class:"team-content"},X={class:"team-header"},Y={class:"team-left-section"},Z={class:"team-info"},ee={class:"team-title"},ae={class:"players-avatars"},se={class:"team-right-section"},te={class:"progress-wrapper"},le={class:"win-ratio"},oe=D({__name:"TeamCard",props:{team:{}},emits:["player-click"],setup(A,{emit:r}){const n=r,d=s=>{n("player-click",s)};return(s,f)=>(a(),m("div",O,[o("div",Q,[o("div",X,[o("div",Y,[v(F,{class:"team-avatar",size:"100"},{default:_(()=>[s.team.logo?(a(),c(T,{key:0,src:s.team.logo,alt:"Team logo"},null,8,["src"])):(a(),c(C,{key:1,icon:"mdi-account",color:"#42DDF2FF",size:"100"}))]),_:1}),o("div",Z,[o("div",ee,k(s.team.name),1),o("div",ae,[(a(!0),m(P,null,I(s.team.players.slice(0,10),(i,p)=>(a(),c(F,{key:i.id,size:"40",class:"player-avatar",onClick:y=>d(i.id)},{default:_(()=>[i.avatar&&i.avatar!==""?(a(),c(T,{key:0,src:i.avatar,alt:"Player avatar"},null,8,["src"])):(a(),c(C,{key:1,icon:"mdi-account",color:"#42DDF2FF",size:"24"}))]),_:2},1032,["onClick"]))),128))])])]),o("div",se,[o("div",te,[v(S,{"model-value":parseInt(s.team.game_win_ratio),color:"#42DDF2FF",height:"6",rounded:"",class:"progress-bar"},null,8,["model-value"]),o("span",le,k(s.team.game_win_ratio),1)])])]),v(z,{class:"view-details-btn",variant:"outlined",to:"/teams/"+s.team.id},{default:_(()=>f[0]||(f[0]=[j(" VIEW DETAILS ")])),_:1},8,["to"])])]))}}),re=M(oe,[["__scopeId","data-v-199df85d"]]),ne={class:"content-wrapper"},ie={key:0,class:"d-flex justify-center align-center",style:{height:"200px"}},ce={key:1,class:"error-text pa-4"},de={key:3,class:"load-more-wrapper"},ue=D({__name:"TeamList",setup(A){const r=l([]),n=l(!1),d=l(null);l(9);const s=l(!0),f=l(!1),i=l(!1),p=l(null),y=l(!1),V=l(null),L=async(e=!1)=>{try{e?f.value=!0:(n.value=!0,d.value=null);const t=new URLSearchParams,u=e?r.value.length:0;t.append("offset",u.toString()),t.append("limit","9"),t.append("sort_by","desc");const h=await fetch(`${E}/teams/?${t}`);if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);const g=await h.json(),w=Array.isArray(g)?g:g.results||[];e?r.value=[...r.value,...w]:r.value=w,s.value=w.length===9}catch(t){console.error("Error fetching teams:",t),d.value="Failed to load teams. Please try again later."}finally{n.value=!1,f.value=!1}},B=async()=>{await L(!0)},b=async e=>{try{y.value=!0,V.value=null;const t=await fetch(`${E}/players/${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);p.value=await t.json()}catch(t){console.error("Error fetching player:",t),V.value="Failed to load player. Please try again later."}finally{y.value=!1}},x=e=>{b(e),i.value=!0};return H(()=>{L(),window.addEventListener("search-results",e=>{e.detail.route==="/teams"&&(r.value=e.detail.results,n.value=!1,d.value=null,s.value=e.detail.results.length===9)})}),N(()=>{window.removeEventListener("search-results",e=>{e.detail.route==="/teams"&&(r.value=e.detail.results,n.value=!1,d.value=null,s.value=e.detail.results.length===9)})}),(e,t)=>(a(),m(P,null,[v(J),o("div",ne,[v(U,null,{default:_(()=>[n.value?(a(),m("div",ie,[v(R,{indeterminate:"",color:"#00ff9d"})])):d.value?(a(),m("div",ce,k(d.value),1)):(a(),c(q,{key:2,class:"row-width"},{default:_(()=>[(a(!0),m(P,null,I(r.value,u=>(a(),c(G,{key:u.id,cols:"12",md:"4",class:"team-column"},{default:_(()=>[(a(),c(re,{key:u.id,team:u,onPlayerClick:x},null,8,["team"]))]),_:2},1024))),128))]),_:1})),v(W,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=u=>i.value=u),player:p.value},null,8,["modelValue","player"]),!n.value&&s.value?(a(),m("div",de,[!n.value&&s.value?(a(),c(K,{key:0,"is-loading":f.value,"button-text":"Load More Teams",onLoadMore:B},null,8,["is-loading"])):$("",!0)])):$("",!0)]),_:1})])],64))}}),he=M(ue,[["__scopeId","data-v-058fdea2"]]);export{he as default};
