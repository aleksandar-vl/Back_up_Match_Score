import{d as ie,r as e,I as ce,o as me,c as g,b as o,e as h,w as A,V as ve,F as G,A as W,f as s,g as pe,t as q,v as fe,h as E,i as ye,j as ge,k as he,x as Ae,l as Te,_ as Ve}from"./index-DD0chK9m.js";import{D as we}from"./DashboardWelcome-CxMUSv8I.js";import{A as Pe,a as _e,b as De,c as Ue,U as ke}from"./AddPlayerDialog-4_fjKbik.js";import{F as Fe,T as Le}from"./TournamentCard-Ch5eX-qp.js";import{L as Ee}from"./LoadMoreButton-Cql9AWZ4.js";import{H as be}from"./HeaderSection-BqWuRDgu.js";import{V as xe}from"./VSnackbar-DOp5kfB_.js";import"./VAlert-BswZB0pH.js";import"./VForm-D4HHFwdz.js";import"./VSelect-BpGEebQz.js";import"./dialog-transition-ChtNxUt0.js";import"./VSpacer-DKUpOtpE.js";import"./VDialog-8pvQ3nO6.js";import"./VAutocomplete-CIS9KaFs.js";import"./VFileInput-DO4WOKog.js";const Ne={class:"content-wrapper"},Se={class:"tournaments-section"},Ce={class:"tournaments-section"},$e={key:0,class:"d-flex justify-center align-center",style:{height:"200px"}},Me={key:1,class:"error-text pa-4"},Re={key:2,class:"empty-state"},Be=ie({__name:"DashboardDirector",setup(Ie){const u=e([]),d=e(null),i=e(!1),p=e(""),J=e("all"),K=e("all"),Q=e(""),f=e(10),b=e(""),x=e(""),N=e(""),S=e(""),C=ce(),X=()=>{b.value="",x.value="",N.value="",S.value=""},T=e(!1),Y=e(""),V=e(!1),$=e(""),w=e(""),c=e(null),M=e(""),R=e(""),B=e(""),P=e(null),_=e(null),y=e(""),I=e(!1),m=e(!1),D=e(!0),U=e(!1),Z=e(null),k=e(!1),ee=e(""),ae=e(""),te=e(null),F=e(!1),n=e({period:null,status:null,format:null}),le=()=>{i.value=!0,p.value="Team added successfully!"},oe=async()=>{i.value=!0,p.value="Tournament created successfully!",await L()},se=l=>{i.value=!0,p.value=`Player ${l.username} was successfully added!`},ne=l=>{i.value=!0,p.value=`Player ${l.username} was successfully updated!`},re=async l=>{try{n.value=l,m.value=!0,d.value=null,f.value=10;const a=new URLSearchParams;a.append("author_id",C.userId||""),a.append("offset","0"),a.append("limit",f.value.toString()),l.period&&a.append("period",l.period),l.status&&a.append("status",l.status),l.format&&a.append("tournament_format",l.format);const t=await fetch(`${W}/tournaments/?${a}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json(),v=Array.isArray(r)?r:r.results||[];u.value=v,I.value=!!(J.value||K.value||Z.value),D.value=v.length===f.value}catch(a){console.error("Error fetching tournaments:",a),d.value="Failed to load tournaments. Please try again later."}finally{m.value=!1}},L=async(l=!1)=>{try{l?U.value=!0:(m.value=!0,I.value=!1),d.value=null;const a=new URLSearchParams;a.append("author_id",C.userId||""),a.append("offset","0"),a.append("limit",f.value.toString()),n.value.period&&a.append("period",n.value.period),n.value.status&&a.append("status",n.value.status),n.value.format&&a.append("tournament_format",n.value.format);const t=await fetch(`${W}/tournaments/?${a}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json(),v=Array.isArray(r)?r:r.results||[];l?u.value=[...u.value,...v]:u.value=v,D.value=v.length===10}catch(a){console.error("Error fetching tournaments:",a),d.value="Failed to load tournaments. Please try again later."}finally{m.value=!1,U.value=!1}},ue=async()=>{f.value+=10,await L(!0)},j=async()=>{P.value=null,_.value&&URL.revokeObjectURL(_.value),_.value=null,$.value="",w.value="",M.value="",R.value="",B.value="",P.value=null,y.value="",F.value=!0},O=()=>{Y.value="",Q.value=null,T.value=!0},H=()=>{ee.value="",te.value=null,ae.value="",k.value=!0},z=async()=>{X(),w.value="",b.value="",x.value="",N.value="",S.value="",$.value="",w.value="",c.value=null,M.value="",R.value="",B.value="",P.value=null,y.value="",V.value=!0,c.value&&c.value.team_id&&(y.value=c.value.team_id)},de=()=>{var l;(l=c.value)!=null&&l.team_id?y.value=c.value.team_id:y.value=""};return me(()=>{de(),L()}),(l,a)=>(s(),g(G,null,[o(be),h("div",Ne,[o(ve,null,{default:A(()=>[o(we,{userRole:"Director"}),h("div",Se,[o(Pe,{openAddTournamentDialog:O,openAddTeamDialog:H,openAddPlayerDialog:j,openUpdatePlayerDialog:z,onOpenTournament:O,onOpenTeam:H,onOpenPlayer:j,onOpenUpdatePlayer:z}),o(Fe,{onFilterChange:re})]),h("div",Ce,[m.value?(s(),g("div",$e,[o(pe,{indeterminate:"",color:"#00ff9d"})])):d.value?(s(),g("div",Me,q(d.value),1)):u.value.length?(s(),E(ge,{key:3},{default:A(()=>[(s(!0),g(G,null,ye(u.value,t=>(s(),E(Te,{key:t.id,cols:"12",md:"6",class:"tournament-column"},{default:A(()=>[o(Le,{tournament:t},null,8,["tournament"])]),_:2},1024))),128))]),_:1})):(s(),g("div",Re,[o(fe,{icon:"mdi-tournament",size:"64",color:"#42DDF2FF",class:"mb-4"}),a[5]||(a[5]=h("div",{class:"empty-text"},"No tournaments created yet",-1)),a[6]||(a[6]=h("div",{class:"empty-subtext"},'Get started by clicking the "Add Tournament" button',-1))])),!m.value&&D.value?(s(),E(Ee,{key:4,"is-loading":U.value,"button-text":"Load More Tournaments",onLoadMore:ue},null,8,["is-loading"])):he("",!0)]),o(_e,{modelValue:T.value,"onUpdate:modelValue":a[0]||(a[0]=t=>T.value=t),onTournamentAdded:oe},null,8,["modelValue"]),o(De,{modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=t=>k.value=t),onTeamAdded:le},null,8,["modelValue"]),o(Ue,{modelValue:F.value,"onUpdate:modelValue":a[2]||(a[2]=t=>F.value=t),onPlayerAdded:se},null,8,["modelValue"]),o(ke,{modelValue:V.value,"onUpdate:modelValue":a[3]||(a[3]=t=>V.value=t),onPlayerUpdated:ne},null,8,["modelValue"]),o(xe,{modelValue:i.value,"onUpdate:modelValue":a[4]||(a[4]=t=>i.value=t),color:"success",timeout:"3000"},{default:A(()=>[Ae(q(p.value),1)]),_:1},8,["modelValue"])]),_:1})])],64))}}),ta=Ve(Be,[["__scopeId","data-v-ca9adfef"]]);export{ta as default};
